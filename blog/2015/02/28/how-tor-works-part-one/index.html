<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta property="og:title" content="How Tor Works: Part One &#183; Jordan Wright"><meta property="og:site_name" content="Jordan Wright"><meta property="og:url" content="https://jordan-wright.com/blog/2015/02/28/how-tor-works-part-one/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2015-02-28T00:00:00Z"><meta property="og:article:tag" content="tor"><title>How Tor Works: Part One &#183; Jordan Wright</title><meta name=description content="Security and Programming Blog"><meta name=HandheldFriendly content="True"><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://jordan-wright.com/blog/images/favicon.ico><link rel=apple-touch-icon href=https://jordan-wright.com/blog/images/apple-touch-icon.png><link rel=stylesheet type=text/css href=https://jordan-wright.com/blog/css/screen.css><link rel=stylesheet type=text/css href=https://jordan-wright.com/blog/css/highlight.css><link rel=stylesheet type=text/css href=https://jordan-wright.com/blog/css/nav.css><link rel=stylesheet type=text/css href=https://jordan-wright.com/blog/css/fonts.css><link href=https://jordan-wright.com/blog/index.xml rel=alternate type=application/rss+xml title="Jordan Wright"><meta name=generator content="Hugo 0.154.5"><link rel=canonical href=https://jordan-wright.com/blog/2015/02/28/how-tor-works-part-one/><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-44718701-1","auto"),ga("send","pageview")</script></head><body class=nav-closed><div class=nav><h3 class=nav-title>Menu</h3><a href=# class=nav-close><span class=hidden>Close</span></a><ul><li class=nav-opened role=presentation><a href=https://jordan-wright.com/>Home</a></li><li class=nav-opened role=presentation><a href=https://jordan-wright.com/contact/>Contact</a></li><li class=nav-opened role=presentation><a href=https://jordan-wright.com/projects/>Projects</a></li><li class=nav-opened role=presentation><a href=https://jordan-wright.com/blog/>Blog</a></li><li class=nav-opened role=presentation><a href=https://raidersec.blogspot.com>Raidersec</a></li></ul><a class="subscribe-button icon-feed" href=https://jordan-wright.com/blog/index.xml>Subscribe</a></div><span class=nav-cover></span><div class=site-wrapper><header class="main-header post-head no-cover"><nav class="main-nav clearfix"><a class=menu-button href=#><span class=burger>&#9776;</span><span class=word>Menu</span></a></nav></header><main class=content role=main><article class="post post"><header class=post-header><h1 class=post-title>How Tor Works: Part One</h1><small></small><section class=post-meta><time class=post-date datetime=2015-02-28T00:00:00Z>Feb 28, 2015
</time><span class="post-tag small"><a href=https://jordan-wright.com/blog/tags/tor/>#tor</a></span></section></header><section class=post-content><img src=/blog/images/headers/how_tor_works_1.png alt class=pure-img><h3 id=introduction>Introduction</h3><p>Tor is an anonymity tool used by those who want to stay private and uncensored when browsing the Internet. Over time, it&rsquo;s grown to be pretty darn good at this. This makes the security, stability, and speed of the underlying network critical to those depending on it.</p><p>But how does Tor work under the hood? In this series of posts, we&rsquo;ll take a deep dive into the structure and protocols used by the Tor network in order to see first-hand how Tor operates.</p><h3 id=brief-history-of-tor>Brief History of Tor</h3><p>The concept of Onion Routing (more on why it&rsquo;s called this later) was first <a href=http://www.onion-router.net/History.html>proposed</a> in 1995, where it was first funded by the <a href=http://www.onr.navy.mil/>Office of Naval Research</a> (ONR) and later helped out by DARPA in 1997. Since then, funding for the Tor Project has been provided by a <a href=https://www.torproject.org/about/sponsors.html.en>number of different sponsors</a>, and the Tor Project was recently announced a winner of the <a href=http://www.redditblog.com/2015/02/announcing-winners-of-reddit-donate.html>reddit donate</a> campaign.</p><p>The Tor software as we know it today was originally open-sourced in October of 2003, and is the 3<sup>rd</sup> generation of Onion Routing software. This idea of Onion Routing was (and is!) simply that we can wrap traffic in encrypted layers (like <em>onions</em>) in order to protect the contents of the data as well as the anonymity of the sender and receiver.</p><h3 id=tor-101>Tor 101</h3><p>Now that we know a bit about Tor&rsquo;s history, let&rsquo;s talk about how it works. At an <em>extremely</em> high level, Tor works by bouncing connections from your computer to destinations (such as google.com) through a series of intermediate computers, or <strong>relays</strong>.</p><div style=padding:10px;background:#3498db;border-radius:5px><svg width="100%" height="482" style="max-height:250px" onclick="d.reset().play();" viewBox="0 0 748 483" id="earth"><g id="layer1" transform="translate(-135.6,-230.9)"><g id="g6088" transform="matrix(9.9,0,0,9.9,135.6,230.9)" style="fill:#fff"><g id="g6036" style="fill:#fff"><g id="g6038" style="fill:#fff"><polygon id="polygon6040" points="35.5,9.4 34.7,9.5 34.5,9.9 34.5,10.2 34.9,10.5 35.4,10.8 35.4,11.1 34.9,11.2 34.8,12.0 35.5,12.0 36.3,11.9 36.8,11.4 36.3,11.2 36.0,10.9 35.7,10.3" style="fill:#fff"/><polygon id="polygon6042" points="33.8,10.5 33.3,11.2 33.3,11.7 33.8,11.7 34.8,11.1 34.8,10.6 34.4,10.4" style="fill:#fff"/><path id="path6044" d="m22.4 13.1-.1.3h-.6v.3h.1v.1h.3l.2-.1v-.3h.3l.1-.2h-.2-.2z" style="fill:#fff"/><polygon id="polygon6046" points="20.8,13.7 20.7,14.0 21.2,14.0 21.2,13.7 21.0,13.4" style="fill:#fff"/><path id="path6048" d="M48.6 24C48.6 23.3 48.5 22.6 48.5 21.9 48.2 19.6 47.7 17.4 46.9 15.3 46.8 15.1 46.7 15 46.7 14.8c-1.1-2.6-2.7-5-4.6-7C42 7.6 41.9 7.5 41.7 7.4 41.4 7 41 6.6 40.6 6.3 36.3 2.4 30.6.0 24.3.0 17.9.0 12.1 2.4 7.8 6.4c-1 .9-1.9 1.9-2.8 3-3.2 4.1-5 9.3-5 14.9.0 13.4 10.9 24.3 24.3 24.3 9.4.0 17.6-5.4 21.6-13.2.8-1.6 1.5-3.4 1.9-5.3.1-.4.2-.9.3-1.4.2-1.3.3-2.8.3-4.2.001.0.0-.1.0-.2zm-4.5-9.7.1-.1c.1.3.3.7.5 1h-.2-.4v-.9zm-3.6-4.2V9c.3.4.7.8 1.1 1.2l-.4.6h-1.5v-.3l.9-.4zM11.2 7.4V7.3h.4v-.1h.7v.3l-.2.3h-1l.001-.4zm.7 1s.4.0.5.0v.4L11.4 8.9 11.2 8.7 11.9 8.4zM45.5 18h-1.7l-1-.8-1.1.1v.6h-.3l-.3-.2-1.9-.5V16l-2.5.1-.7.4h-.9-.4l-1.2.6v1.2L31.1 20l.2.7h.5L31 21.8l-.3.1v1.8l2.1 2.4h.9V26h1.6l.4-.4h.9l.5.5 1.4.1-.1 1.8 1.5 2.7-.8 1.5v.7l.6.6v1.7l.8 1.1v1.4h.7c-4 5-10.3 8.2-17.3 8.2C12 46.6 2 36.6 2 24.3c0-3.1.6-6.1 1.7-8.8V14.8l.8-.9c.3-.6.6-1.1.9-1.6L5.5 12.7l-1 1.2c-.3.5-.5 1.1-.8 1.6v1.2l.9.4v1.7l.8 1.5.7.1v-.5l-.8-1.3-.1-1.2h.5l.2 1.3 1.2 1.7-.3.5.7 1.1 1.9.4v-.3l.7.1v.5l.6.1.9.2 1.3 1.5 1.7.1.1 1.3-1.1.8v1.2l-.1.7 1.6 2.1.1.7s.6.1.6.1 1.3.9 1.3.9v3.8l.4.1-.3 1.7.7 1-.1 1.7 1 1.8 1.3 1.1h1.3l.1-.4-.9-.8V42l.1-.5V41h-.6l-.3-.4.5-.5v-.3l-.6-.1v-.3l.8-.1 1.3-.6.4-.8 1.3-1.7-.3-1.3.4-.7h1.2l.8-.6.2-2.6.9-1.2.1-.7-.8-.2-.5-.9h-1.9l-1.5-.5v-1.1l-.5-.9h-1.4l-.8-1.2-.7-.3v.3h-1.3l-.4-.6-1.3-.2-1.1 1.3-1.7-.3-.1-2-1.2-.2.5-.9-.1-.5-1.7 1.1-1-.1-.3-.8.2-.8.5-1 1.3-.6h2.6v.8l.9.4v-1.3l.6-.6 1.3-.9v-.6l1.3-1.4 1.4-.8-.1-.1.9-.9h.3l.1.2.3-.4h-.4l-.4-.1v-.4l.2-.1h.4.2l.1.3h.2v0l.6-.1v-.3h.3v.3l-.3.2h.001v.3l1.2.3s.001.0.0.0h.2V13l-.9-.4v-.2l.8-.2v-.7l-.8-.5v-1.3l-1.1.5h-.4l.1-1-1.5-.3-.6.4v1.5l-1.1.3-.4.9h-.5V10.5L16.9 10.3 16.3 10 16.1 9.2l2-1.2L19 7.7 19.1 8.4 19.7 8.3V8L20.3 7.9V7.8L20.1 7.7 20 7.4h.6L21 7l.1-.1 1.4-.1.6.5-1.6.9 2.1.5.2-.7h.9L25.4 7.1 24.7 7V6.2l-2.1-1-1.4.2L20.4 5.8V6.9L19.6 6.7 19.5 6.2 20.3 5.4 18.8 5.3l-.4.1-.1.5h.5l-.1.5h-.9l-.1.3h-1.3s0-.7.0-.7 1 0 1 0L18 5.5l-.5-.2L16.9 5.8H15.9L15.3 5H14.1L12.8 6H14l.1.3-.3.2h1.3l.2.4L13.8 7.1 13.7 6.7 12.8 6.5l-.5-.3H11.2C14.8 3.5 19.4 2 24.3 2 29.9 2 35 4.1 39 7.5l-.2.4-1 .4-.4.4.1.5h.5l.3.8.9-.3.1 1h-.2l-.7-.1-.8.1-.8 1.1-1.1.1-.1.9.4.1-.1.6-1.1-.2-1 .2-.2.5.1 1.2.6.2h1 .6l.2-.5 1-1.4.7.1.7-.6.1.5 1.7 1.1-.2.2h-.7l.3.4.4.1.5-.2v-.6l.2-.1-.2-.2-1.1-.6-.3-.8h.9l.3.3.8.7v.8l.8.9.3-1.2.5-.3.1 1 .5.6h1.1c.2.5.4 1.1.6 1.7l-.1.1zm-32.3-7 .5-.2.5.1-.1.7-.5.1-.3-.7zm3 1.6v.4h-1.3l-.5-.1.1-.3.6-.2h.8v.2h.1zm.6.6V13.8l-.3.2h-.4s0-.6.0-.7h.7zm-.3-.1v-.5l.4.4-.4.1zm.2 1v.4l-.3.3h-.7l.1-.4h.3v-.1h.5zm-1.7-.8h.7l-.9 1.3-.3-.2v-.5l.5-.5zm3 .7v.4H17.3l-.1-.2v-.4h0l.8.2zm-.6-.5.2-.2.3.2-.2.2-.2-.2zm28.5 5.7c0 .1.0.2.0.3l-.1-.2z" style="fill:#fff"/><path id="path6050" d="M3.7 14.8V15.5c.3-.5.5-1.1.8-1.6l-.7.9z" style="fill:#fff"/></g></g><g id="g6052" style="fill:#fff"/><g id="g6054" style="fill:#fff"/><g id="g6056" style="fill:#fff"/><g id="g6058" style="fill:#fff"/><g id="g6060" style="fill:#fff"/><g id="g6062" style="fill:#fff"/><g id="g6064" style="fill:#fff"/><g id="g6066" style="fill:#fff"/><g id="g6068" style="fill:#fff"/><g id="g6070" style="fill:#fff"/><g id="g6072" style="fill:#fff"/><g id="g6074" style="fill:#fff"/><g id="g6076" style="fill:#fff"/><g id="g6078" style="fill:#fff"/><g id="g6080" style="fill:#fff"/></g><path style="fill:none;stroke:#96281b;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m292.9 394.7s85.8-133.3 186.8 20.2" id="path6115"/><path style="fill:none;stroke:#000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m479.8 414.9s87.8-141.4 56.5 63.6" id="path6625"/><path style="fill:none;stroke:#90c695;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m401.4 247.1S258.6 156.4 185 280.6" id="path6627" transform="translate(135.6,230.9)"/><path style="fill:none;stroke:#f4b350;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m185.7 280s17.8-149.2-93.5-107.1" id="path6629" transform="translate(135.6,230.9)"/><path style="fill:none;stroke:#96281b;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m688.2 283.4h39.3" id="path6631"/><path style="fill:none;stroke:#000;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m688.7 338.5H728" id="path6631-4"/><path style="fill:none;stroke:#90c695;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m688.7 393.5H728" id="path6631-6"/><path style="fill:none;stroke:#f4b350;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m688.7 452.1H728" id="path6631-0"/><text style="font-size:20px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI" x="740.7" y="288.3" id="text6740"><tspan x="740.7" y="288.3" id="tspan6742"><tspan x="740.7" y="288.3" style="font-weight:300;fill:#fff" id="tspan6744">Guard Node</tspan></tspan></text><text style="font-size:20px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI" x="743" y="344.3" id="text6746"><tspan x="743" y="344.3" id="tspan6748"><tspan x="743" y="344.3" style="font-weight:300;fill:#fff" id="tspan6750">Middle Node</tspan></tspan></text><text style="font-size:20px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI" x="741.4" y="399.8" id="text6752"><tspan x="741.4" y="399.8" id="tspan6754"><tspan x="741.4" y="399.8" style="font-weight:300;fill:#fff" id="tspan6756">Exit Node</tspan></tspan></text><text style="font-size:20px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI" x="742.3" y="458.5" id="text6758"><tspan x="742.3" y="458.5" id="tspan6760"><tspan x="742.3" y="458.5" style="font-weight:300;fill:#fff" id="tspan6762">Final Destination</tspan></tspan></text></g></svg></div><br><p>Currently, there are <a href=https://metrics.torproject.org/networksize.html>about 6000 relays</a> routing traffic through the Tor network. These relays are located all across the world and run completely by volunteers willing to give up some bandwidth for the cause. It&rsquo;s important to note that most relays don&rsquo;t have special hardware or software to run. They just have the Tor software configured to act as a relay.</p><p>When it comes to speed and anonymity of the Tor network - the more relays, the better! This makes sense, because every relay only has so much bandwidth to offer. Additionally, if there are more relays to choose from, it will be more difficult to track any one user.</p><h3 id=types-of-relays>Types of Relays</h3><p>By default, Tor bounces connections through 3 relays. Each of these have a specific role to play (we&rsquo;ll cover each in more detail in later posts):</p><div style=padding:10px;background:#3498db;border-radius:5px><svg width="100%" height="1236.6" id="network" style="max-height:300px" onclick="e.reset().play(1.25);" viewBox="0 0 1956 1236"><g id="layer1" transform="translate(885.83545,44.405879)"><g id="g8200" transform="matrix(0.38940404,0,0,0.37354888,832.4136,424.91373)" style="fill:#fff"><g id="g8160" style="fill:#fff"><path id="path8162" d="M578.766 51.487V50.592H575.77 35.93 32.934v.895C15.272 52.701 2.095 66.753.0 83.808v3.002 355.724c0 6.898 1.795 12.712 4.791 17.949 6.893 12.137 17.068 18.269 31.14 18.269h197.012v49.695h-37.425c-9.281.0-16.467 7.218-16.467 16.48s7.186 16.479 16.467 16.479h220.666c9.281.0 16.768-7.218 16.768-16.479.0-9.263-7.486-16.48-16.768-16.48H378.759V478.752H575.77c14.078.0 24.343-6.132 31.14-18.269 3.085-5.493 5.091-11.37 5.091-17.949V86.811 83.809c-2.096-17.056-16.168-31.108-33.235-32.322zm0 35.324v355.724c0 2.108-.895 3.002-2.996 3.002H35.93c-2.095.0-2.996-.894-2.996-3.002V86.811 83.809h545.831v3.002z" style="fill:#fff"/></g><g id="g8164" style="fill:#fff"/><g id="g8166" style="fill:#fff"/><g id="g8168" style="fill:#fff"/><g id="g8170" style="fill:#fff"/><g id="g8172" style="fill:#fff"/><g id="g8174" style="fill:#fff"/><g id="g8176" style="fill:#fff"/><g id="g8178" style="fill:#fff"/><g id="g8180" style="fill:#fff"/><g id="g8182" style="fill:#fff"/><g id="g8184" style="fill:#fff"/><g id="g8186" style="fill:#fff"/><g id="g8188" style="fill:#fff"/><g id="g8190" style="fill:#fff"/><g id="g8192" style="fill:#fff"/></g><path id="path8222" d="m-228.29943 189.87983h-114.8306c-2.06335.0-3.73222 1.67169-3.73222 3.73343v33.93777c0 2.06174 1.66887 3.73222 3.73222 3.73222h114.831c2.06536.0 3.73262-1.67048 3.73262-3.73222v-33.93536c0-2.06415-1.66766-3.73584-3.73302-3.73584zm-57.4143 29.54742h-49.01236v-19.60463h49.01236v19.60463zm57.4143 20.51836h-114.8306c-2.06335.0-3.73222 1.67048-3.73222 3.73222v33.93898c0 2.06294 1.66887 3.73463 3.73222 3.73463h114.831c2.06536.0 3.73262-1.67169 3.73262-3.73463v-33.93898c0-2.06174-1.66766-3.73222-3.73302-3.73222zm-57.4143 29.04184h-49.01236v-19.60502h49.01236v19.60502zm57.4143 20.53889h-114.8306c-2.06335.0-3.73222 1.67411-3.73222 3.73584v33.93777c0 2.06134 1.66887 3.73102 3.73222 3.73102h114.831c2.06536.0 3.73262-1.66928 3.73262-3.73102v-33.93777c0-2.06173-1.66766-3.73584-3.73302-3.73584zm-57.4143 30.50664h-49.01236v-19.60342h49.01236v19.60342zm25.89933 45.95518h29.29383v5.34836h-29.24633v.25078c0 3.3792-2.73557 6.11437-6.11035 6.11437h-39.67859c-3.37438.0-6.11276-2.73557-6.11276-6.11437v-.25078h-29.24271v-5.34836h29.29504c.26083-3.13648 2.85994-5.60316 6.06083-5.60316h12.17722v-12.21988c0-3.37478 2.73516-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477V360.385h12.22431c3.20249.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><g id="g8414" transform="matrix(2.4669289,0,0,2.4669289,-885.8347,435.09715)" style="fill:#fff"><g id="g8370" style="fill:#fff"><g id="g8372" style="fill:#fff"><path id="path8374" d="m97.265 71.261c-.093-.108-.23-.172-.374-.172H.494c-.144.0-.28.063-.374.172-.094.108-.136.253-.115.396.014.09 1.468 9.016 12.753 9.016h71.869c11.284.0 12.738-8.926 12.753-9.016.02-.143-.022-.288-.115-.396zm-41.323 6.286h-14.5v-3.334h14.5v3.334z" style="fill:#fff"/><path id="path8376" d="m10.507 67.619h76.37c1.104.0 2-.896 2-2V18.713c0-1.104-.896-2-2-2h-76.37c-1.104.0-2 .896-2 2v46.906c0 1.104.896 2 2 2zm5-43.906h66.37V60.619H15.507V23.713z" style="fill:#fff"/></g></g><g id="g8378" style="fill:#fff"/><g id="g8380" style="fill:#fff"/><g id="g8382" style="fill:#fff"/><g id="g8384" style="fill:#fff"/><g id="g8386" style="fill:#fff"/><g id="g8388" style="fill:#fff"/><g id="g8390" style="fill:#fff"/><g id="g8392" style="fill:#fff"/><g id="g8394" style="fill:#fff"/><g id="g8396" style="fill:#fff"/><g id="g8398" style="fill:#fff"/><g id="g8400" style="fill:#fff"/><g id="g8402" style="fill:#fff"/><g id="g8404" style="fill:#fff"/><g id="g8406" style="fill:#fff"/></g><path id="path8222-9" d="m-234.01367 435.59412h-114.8306c-2.06335.0-3.73222 1.67169-3.73222 3.73343v33.93777c0 2.06174 1.66887 3.73222 3.73222 3.73222h114.831c2.06536.0 3.73262-1.67048 3.73262-3.73222v-33.93536c0-2.06415-1.66766-3.73584-3.73302-3.73584zm-57.4143 29.54742h-49.01236v-19.60463h49.01236v19.60463zm57.4143 20.51836h-114.8306c-2.06335.0-3.73222 1.67048-3.73222 3.73222v33.93898c0 2.06294 1.66887 3.73463 3.73222 3.73463h114.831c2.06536.0 3.73262-1.67169 3.73262-3.73463v-33.93898c0-2.06174-1.66766-3.73222-3.73302-3.73222zm-57.4143 29.04184h-49.01236v-19.60502h49.01236v19.60502zm57.4143 20.53889h-114.8306c-2.06335.0-3.73222 1.67411-3.73222 3.73584v33.93777c0 2.06134 1.66887 3.73102 3.73222 3.73102h114.831c2.06536.0 3.73262-1.66928 3.73262-3.73102v-33.93777c0-2.06173-1.66766-3.73584-3.73302-3.73584zm-57.4143 30.50664h-49.01236v-19.60342h49.01236v19.60342zm25.89933 45.95518h29.29383v5.34836h-29.24633v.25078c0 3.3792-2.73557 6.11437-6.11035 6.11437h-39.67859c-3.37438.0-6.11276-2.73557-6.11276-6.11437v-.25078h-29.24271v-5.34836h29.29504c.26083-3.13648 2.85994-5.60316 6.06083-5.60316h12.17722v-12.21988c0-3.37478 2.73516-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477v12.21988h12.22431c3.20249.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><path id="path8222-90" d="m-242.5851 692.73698h-114.8306c-2.06335.0-3.73222 1.67169-3.73222 3.73343v33.93777c0 2.06174 1.66887 3.73222 3.73222 3.73222h114.831c2.06536.0 3.73262-1.67048 3.73262-3.73222v-33.93536c0-2.06415-1.66766-3.73584-3.73302-3.73584zm-57.4143 29.54742h-49.01236v-19.60463h49.01236v19.60463zm57.4143 20.51836h-114.8306c-2.06335.0-3.73222 1.67048-3.73222 3.73222v33.93898c0 2.06294 1.66887 3.73463 3.73222 3.73463h114.831c2.06536.0 3.73262-1.67169 3.73262-3.73463v-33.93898c0-2.06174-1.66766-3.73222-3.73302-3.73222zm-57.4143 29.04184h-49.01236v-19.60502h49.01236v19.60502zm57.4143 20.53889h-114.8306c-2.06335.0-3.73222 1.67411-3.73222 3.73584v33.93777c0 2.06134 1.66887 3.73102 3.73222 3.73102h114.831c2.06536.0 3.73262-1.66928 3.73262-3.73102v-33.93777c0-2.06173-1.66766-3.73584-3.73302-3.73584zm-57.4143 30.50664h-49.01236v-19.60342h49.01236v19.60342zm25.89933 45.95518h29.29383v5.34836h-29.24633v.25078c0 3.3792-2.73557 6.11437-6.11035 6.11437h-39.67859c-3.37438.0-6.11276-2.73557-6.11276-6.11437v-.25078h-29.24271v-5.34836h29.29504c.26083-3.13648 2.85994-5.60316 6.06083-5.60316h12.17722v-12.21988c0-3.37478 2.73516-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477v12.21988h12.22431c3.20249.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><path id="path8222-90-7" d="M191.70061-44.405879H76.870013c-2.063349.0-3.732221 1.67169-3.732221 3.733428v33.93777c0 2.061738 1.668872 3.7322207 3.732221 3.7322207H191.70101c2.06536.0 3.73262-1.6704827 3.73262-3.7322207v-33.935354c0-2.064154-1.66766-3.735844-3.73302-3.735844zM134.28632-14.85846H85.27395v-19.604625h49.01237V-14.85846zM191.70061 5.6598986H76.870013c-2.063349.0-3.732221 1.6704828-3.732221 3.7322208V43.331097c0 2.062945 1.668872 3.734636 3.732221 3.734636H191.70101c2.06536.0 3.73262-1.671691 3.73262-3.734636V9.3921194c0-2.061738-1.66766-3.7322208-3.73302-3.7322208zM134.28632 34.701745H85.27395V15.096717h49.01237v19.605028zm57.41429 20.538887H76.870013c-2.063349.0-3.732221 1.674106-3.732221 3.735844v33.93777c0 2.061335 1.668872 3.731013 3.732221 3.731013H191.70101c2.06536.0 3.73262-1.669275 3.73262-3.731013v-33.93777c0-2.061738-1.66766-3.735844-3.73302-3.735844zM134.28632 85.747271H85.27395V66.143853h49.01237v19.603418zm25.89932 45.955179h29.29383v5.34837h-29.24633v.25077c0 3.3792-2.73557 6.11437-6.11034 6.11437h-39.6786c-3.37437.0-6.11276-2.73557-6.11276-6.11437v-.25077H79.088736v-5.34837h29.295034c.26084-3.13648 2.85995-5.60316 6.06083-5.60316h12.17722v-12.21988c0-3.37478 2.73516-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477v12.21988h12.22431c3.2025.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><g style="fill:#fff" id="g8224-3-3" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8226-0-4" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8228-3-0" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8230-50-8" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8232-7-8" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8234-6-1" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8236-7-5" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8238-83-2" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8240-6-3" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8242-4-2" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8244-4-4" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8246-1-6" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8248-9-6" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8250-5-6" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><g style="fill:#fff" id="g8252-5-2" transform="matrix(0.40252597,0,0,0.40252597,40.374593,-44.405879)"/><path id="path8222-90-4" d="M183.12918 244.16555H68.298585c-2.063349.0-3.732221 1.67169-3.732221 3.73343v33.93777c0 2.06174 1.668872 3.73222 3.732221 3.73222H183.12958c2.06536.0 3.73263-1.67048 3.73263-3.73222v-33.93536c0-2.06415-1.66767-3.73584-3.73303-3.73584zm-57.41429 29.54742H76.702522v-19.60463h49.012368v19.60463zm57.41429 20.51836H68.298585c-2.063349.0-3.732221 1.67048-3.732221 3.73222v33.93898c0 2.06294 1.668872 3.73463 3.732221 3.73463H183.12958c2.06536.0 3.73263-1.67169 3.73263-3.73463v-33.93898c0-2.06174-1.66767-3.73222-3.73303-3.73222zm-57.41429 29.04184H76.702522v-19.60502h49.012368v19.60502zm57.41429 20.53889H68.298585c-2.063349.0-3.732221 1.67411-3.732221 3.73584v33.93777c0 2.06134 1.668872 3.73102 3.732221 3.73102H183.12958c2.06536.0 3.73263-1.66928 3.73263-3.73102V347.5479c0-2.06173-1.66767-3.73584-3.73303-3.73584zM125.71489 374.3187H76.702522v-19.60342h49.012368v19.60342zm25.89932 45.95518h29.29383v5.34836h-29.24633v.25078c0 3.3792-2.73556 6.11437-6.11034 6.11437h-39.6786c-3.37437.0-6.112756-2.73557-6.112756-6.11437v-.25078H70.517308v-5.34836h29.295035c.260837-3.13648 2.859947-5.60316 6.060837-5.60316h12.17721v-12.21988c0-3.37478 2.73517-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477v12.21988h12.22431c3.2025.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><path id="path8222-90-3" d="M174.55775 549.87984H59.727153c-2.063349.0-3.732221 1.67169-3.732221 3.73343v33.93777c0 2.06174 1.668872 3.73222 3.732221 3.73222H174.55815c2.06536.0 3.73262-1.67048 3.73262-3.73222v-33.93536c0-2.06415-1.66766-3.73584-3.73302-3.73584zm-57.41429 29.54742H68.13109v-19.60463h49.01237v19.60463zm57.41429 20.51836H59.727153c-2.063349.0-3.732221 1.67048-3.732221 3.73222v33.93898c0 2.06294 1.668872 3.73463 3.732221 3.73463H174.55815c2.06536.0 3.73262-1.67169 3.73262-3.73463v-33.93898c0-2.06174-1.66766-3.73222-3.73302-3.73222zm-57.41429 29.04184H68.13109v-19.60502h49.01237v19.60502zm57.41429 20.53889H59.727153c-2.063349.0-3.732221 1.67411-3.732221 3.73584v33.93777c0 2.06134 1.668872 3.73102 3.732221 3.73102H174.55815c2.06536.0 3.73262-1.66928 3.73262-3.73102v-33.93777c0-2.06173-1.66766-3.73584-3.73302-3.73584zm-57.41429 30.50664H68.13109v-19.60342h49.01237v19.60342zm25.89932 45.95518h29.29383v5.34836h-29.24633v.25078c0 3.3792-2.73557 6.11437-6.11034 6.11437H97.301342c-3.374375.0-6.11276-2.73557-6.11276-6.11437v-.25078H61.945876v-5.34836h29.295035c.260837-3.13648 2.859947-5.60316 6.060833-5.60316h12.177216v-12.21988c0-3.37478 2.73516-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477v12.21988h12.22431c3.2025.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><path id="path8222-90-39" d="M183.12918 889.87983H68.298584c-2.063349.0-3.732221 1.67169-3.732221 3.73343v33.93777c0 2.06174 1.668872 3.73222 3.732221 3.73222H183.12958c2.06536.0 3.73263-1.67048 3.73263-3.73222v-33.93536c0-2.06415-1.66767-3.73584-3.73303-3.73584zm-57.41429 29.54742H76.702521v-19.60463h49.012369v19.60463zm57.41429 20.51836H68.298584c-2.063349.0-3.732221 1.67048-3.732221 3.73222v33.93898c0 2.06294 1.668872 3.73463 3.732221 3.73463H183.12958c2.06536.0 3.73263-1.67169 3.73263-3.73463v-33.93898c0-2.06174-1.66767-3.73222-3.73303-3.73222zm-57.41429 29.04184H76.702521v-19.60502h49.012369v19.60502zm57.41429 20.53889H68.298584c-2.063349.0-3.732221 1.67411-3.732221 3.73584V1027.2c0 2.0613 1.668872 3.731 3.732221 3.731H183.12958c2.06536.0 3.73263-1.6693 3.73263-3.731v-33.93782c0-2.06173-1.66767-3.73584-3.73303-3.73584zM125.71489 1020.033H76.702521v-19.6034h49.012369v19.6034zm25.89932 45.9552h29.29383v5.3483h-29.24633v.2508c0 3.3792-2.73556 6.1144-6.11034 6.1144h-39.6786c-3.37437.0-6.112757-2.7356-6.112757-6.1144v-.2508H70.517307v-5.3483h29.295035c.260838-3.1365 2.859948-5.6032 6.060838-5.6032h12.17721v-12.2199c0-3.3748 2.73516-6.1148 6.10994-6.1148h3.05598c3.37518.0 6.11115 2.7404 6.11115 6.1148v12.2199h12.22431c3.2025.0 5.79758 2.4715 6.06244 5.6032z" style="fill:#fff"/><path id="path8222-90-38" d="m603.12919 138.45126h-114.8306c-2.06335.0-3.73222 1.67169-3.73222 3.73343v33.93777c0 2.06174 1.66887 3.73222 3.73222 3.73222h114.831c2.06536.0 3.73262-1.67048 3.73262-3.73222V142.1871c0-2.06415-1.66766-3.73584-3.73302-3.73584zm-57.4143 29.54742h-49.01236v-19.60463h49.01236v19.60463zm57.4143 20.51836h-114.8306c-2.06335.0-3.73222 1.67048-3.73222 3.73222v33.93898c0 2.06294 1.66887 3.73463 3.73222 3.73463h114.831c2.06536.0 3.73262-1.67169 3.73262-3.73463v-33.93898c0-2.06174-1.66766-3.73222-3.73302-3.73222zm-57.4143 29.04184h-49.01236v-19.60502h49.01236v19.60502zm57.4143 20.53889h-114.8306c-2.06335.0-3.73222 1.67411-3.73222 3.73584v33.93777c0 2.06134 1.66887 3.73102 3.73222 3.73102h114.831c2.06536.0 3.73262-1.66928 3.73262-3.73102v-33.93777c0-2.06173-1.66766-3.73584-3.73302-3.73584zm-57.4143 30.50664h-49.01236v-19.60342h49.01236v19.60342zm25.89933 45.95518h29.29383v5.34836h-29.24633v.25078c0 3.3792-2.73557 6.11437-6.11035 6.11437h-39.67859c-3.37438.0-6.11276-2.73557-6.11276-6.11437v-.25078h-29.24271v-5.34836h29.29504c.26083-3.13648 2.85994-5.60316 6.06083-5.60316h12.17722v-12.21988c0-3.37478 2.73516-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477v12.21988h12.22431c3.20249.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><path id="path8222-90-8" d="m603.12919 404.16555h-114.8306c-2.06335.0-3.73222 1.67169-3.73222 3.73343v33.93777c0 2.06174 1.66887 3.73222 3.73222 3.73222h114.831c2.06536.0 3.73262-1.67048 3.73262-3.73222v-33.93536c0-2.06415-1.66766-3.73584-3.73302-3.73584zm-57.4143 29.54742h-49.01236v-19.60463h49.01236v19.60463zm57.4143 20.51836h-114.8306c-2.06335.0-3.73222 1.67048-3.73222 3.73222v33.93898c0 2.06294 1.66887 3.73463 3.73222 3.73463h114.831c2.06536.0 3.73262-1.67169 3.73262-3.73463v-33.93898c0-2.06174-1.66766-3.73222-3.73302-3.73222zm-57.4143 29.04184h-49.01236v-19.60502h49.01236v19.60502zm57.4143 20.53889h-114.8306c-2.06335.0-3.73222 1.67411-3.73222 3.73584v33.93777c0 2.06134 1.66887 3.73102 3.73222 3.73102h114.831c2.06536.0 3.73262-1.66928 3.73262-3.73102V507.5479c0-2.06173-1.66766-3.73584-3.73302-3.73584zm-57.4143 30.50664h-49.01236v-19.60342h49.01236v19.60342zm25.89933 45.95518h29.29383v5.34836h-29.24633v.25078c0 3.3792-2.73557 6.11437-6.11035 6.11437h-39.67859c-3.37438.0-6.11276-2.73557-6.11276-6.11437v-.25078h-29.24271v-5.34836h29.29504c.26083-3.13648 2.85994-5.60316 6.06083-5.60316h12.17722v-12.21988c0-3.37478 2.73516-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477v12.21988h12.22431c3.20249.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><path id="path8222-90-2" d="m603.12919 675.59412h-114.8306c-2.06335.0-3.73222 1.67169-3.73222 3.73343v33.93777c0 2.06174 1.66887 3.73222 3.73222 3.73222h114.831c2.06536.0 3.73262-1.67048 3.73262-3.73222v-33.93536c0-2.06415-1.66766-3.73584-3.73302-3.73584zm-57.4143 29.54742h-49.01236v-19.60463h49.01236v19.60463zm57.4143 20.51836h-114.8306c-2.06335.0-3.73222 1.67048-3.73222 3.73222v33.93898c0 2.06294 1.66887 3.73463 3.73222 3.73463h114.831c2.06536.0 3.73262-1.67169 3.73262-3.73463v-33.93898c0-2.06174-1.66766-3.73222-3.73302-3.73222zm-57.4143 29.04184h-49.01236v-19.60502h49.01236v19.60502zm57.4143 20.53889h-114.8306c-2.06335.0-3.73222 1.67411-3.73222 3.73584v33.93777c0 2.06134 1.66887 3.73102 3.73222 3.73102h114.831c2.06536.0 3.73262-1.66928 3.73262-3.73102v-33.93777c0-2.06173-1.66766-3.73584-3.73302-3.73584zm-57.4143 30.50664h-49.01236v-19.60342h49.01236v19.60342zm25.89933 45.95518h29.29383v5.34836h-29.24633v.25078c0 3.3792-2.73557 6.11437-6.11035 6.11437h-39.67859c-3.37438.0-6.11276-2.73557-6.11276-6.11437v-.25078h-29.24271v-5.34836h29.29504c.26083-3.13648 2.85994-5.60316 6.06083-5.60316h12.17722v-12.21988c0-3.37478 2.73516-6.11477 6.10994-6.11477h3.05598c3.37518.0 6.11115 2.74039 6.11115 6.11477v12.21988h12.22431c3.20249.0 5.79758 2.47151 6.06244 5.60316z" style="fill:#fff"/><path style="fill:none;stroke:#fff;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="M-605.71457 586.64818-339.19506 367.78404" id="path8901"/><path style="fill:none;stroke:#fff;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="M-232.62393 367.1089 72.821982 1070.2735" id="path8903"/><path style="fill:none;stroke:#fff;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="M178.42094 1070.3735 492.84919 315.40803" id="path8905"/><path style="fill:none;stroke:#fff;stroke-width:5;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="M598.64615 315.96501 814.29764 589.51697" id="path8907"/><text style="font-size:40px;font-style:normal;font-weight:400;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI;font-stretch:normal;font-variant:normal" x="-840.00891" y="1171.5078" id="text9491"><tspan x="-840.00891" y="1171.5078" id="tspan9493"><tspan x="-840.00891" y="1171.5078" id="tspan9495" style="-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;fill:#fff">Client</tspan></tspan></text><text style="font-size:40px;font-style:normal;font-weight:400;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI;font-stretch:normal;font-variant:normal" x="-411.45981" y="1177.25" id="text9497"><tspan x="-411.45981" y="1177.25" id="tspan9499"><tspan x="-411.45981" y="1177.25" id="tspan9501" style="-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;fill:#fff">Guard Relay</tspan></tspan></text><text style="font-size:40px;font-style:normal;font-weight:400;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI;font-stretch:normal;font-variant:normal" x="2.2544701" y="1178.1072" id="text9503"><tspan x="2.2544701" y="1178.1072" id="tspan9505"><tspan x="2.2544701" y="1178.1072" id="tspan9507" style="-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;fill:#fff">Middle Relay</tspan></tspan></text><text style="font-size:40px;font-style:normal;font-weight:400;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI;font-stretch:normal;font-variant:normal" x="462.25449" y="1183.8215" id="text9509"><tspan x="462.25449" y="1183.8215" id="tspan9511"><tspan x="462.25449" y="1183.8215" id="tspan9513" style="-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;fill:#fff">Exit Relay</tspan></tspan></text><text style="font-size:40px;font-style:normal;font-weight:400;line-height:125%;letter-spacing:0;word-spacing:0;fill:#fff;fill-opacity:1;stroke:none;font-family:Segoe UI;-inkscape-font-specification:Segoe UI;font-stretch:normal;font-variant:normal" x="856.54022" y="1189.5358" id="text9515"><tspan x="856.54022" y="1189.5358" id="tspan9517"><tspan x="856.54022" y="1189.5358" id="tspan9519" style="-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;fill:#fff">Desination</tspan></tspan></text></g></svg></div><br><ul><li><p><strong>Entry/Guard Relay</strong> - This is the entry point to the Tor network. Relays are selected to serve as guard relays after being around for a while, as well as having shown to be stable and having high bandwidth.<sup><a href=https://blog.torproject.org/blog/lifecycle-of-a-new-relay>1</a></sup></p></li><li><p><strong>Middle Relay</strong> - Middle relays are exactly that - middle nodes used to transport traffic from the guard relay to the exit relay. This prevents the guard and exit relay from knowing each other.</p></li><li><p><strong>Exit Relay</strong> - These relays are the exit point at the edge of the Tor network. These relays send traffic to the final destination intended by the client.</p></li></ul><p>Generally, it is safe to run a guard or middle relay on any VPS or shared server (such as <a href="https://www.digitalocean.com/?refcode=2895d5b6c219">DigitalOcean</a> or <a href=https://aws.amazon.com/ec2/>EC2</a>), since all the server operators will see is harmless encrypted traffic (more on this later).</p><p>However, there are <a href=https://blog.torproject.org/blog/tips-running-exit-node-minimal-harassment>special responsibilities</a> to consider when running an exit node. Since exit relays send traffic directly to the end destination, any illicit activity done through Tor appears to come from the exit relay. This leads to the rare possibility of raids, abuse notices, or more.</p><p>If you meet an exit relay operator - thank them. <strong>They deserve it.</strong></p><h3 id=why-onions>Why Onions?</h3><p>Now that we know how connections are routed through relays, how do we know we can actually <em>trust</em> relays? How can we be sure relays won&rsquo;t track who we&rsquo;re connecting to and sniff the data we send across the wire? The short answer is, <em>we don&rsquo;t have to!</em>.</p><p>Tor is designed to put as little trust in relays as possible. It does this through the use of <strong>encryption</strong>.</p><p>So what&rsquo;s the deal with all the references to onions? To answer this question, let&rsquo;s take a high-level look at how the encryption works when a client makes a connection through the Tor network.</p><span class="fa-stack fa-lg fa-1x"><i class="fa fa-circle fa-stack-2x" style=color:#3498db></i>
<i class="fa fa-stack-1x" style=color:#fff;font-family:inherit>1</i>
</span>The client encrypts the original data in such a way that only the exit relay can decrypt it.
<span class="fa-stack fa-lg fa-1x"><i class="fa fa-circle fa-stack-2x" style=color:#3498db></i>
<i class="fa fa-stack-1x" style=color:#fff;font-family:inherit>2</i>
</span>This encrypted data is then encrypted again in such a way that only the middle relay can decrypt it.
<span class="fa-stack fa-lg fa-1x"><i class="fa fa-circle fa-stack-2x" style=color:#3498db></i>
<i class="fa fa-stack-1x" style=color:#fff;font-family:inherit>3</i>
</span>Finally, this encrypted data is encrypted once more in such a way that only the guard relay can decrypt it.<div style=padding:10px;background:#3498db;border-radius:5px><svg id="encryption" width="100%" height="191" viewBox="0 0 577 192" style="max-height:190px" onclick="s.reset().play();" version="1.0"><style id="style3946">.style0{fill:none;stroke:#000;stroke-width:3;stroke-linejoin:round}.style1{fill:none;stroke:#000;stroke-width:3}.style2{font-size:11.9px;line-height:125%;letter-spacing:0;word-spacing:0;fill:#000;font-family:Sans}.style3{font-size:11.9px}</style><path id="path1934" d="m354.4 37.8c12.5.0 22.9 34.2 22.9 75.7.0 41.6-10.2 76.4-22.7 76.4s-22.7-34.9-22.7-76.4 9.9-75.7 22.5-75.7zm0 0 197-.3c11 0 24.3 34 24.3 75.8.0 41.9-13 76.7-24 76.7l-197.2-.1" class="style0" style="fill:#fff;stroke:#4183d7;stroke-width:3;stroke-linejoin:round;fill-opacity:1;stroke-opacity:1"/><path id="path1934-1" d="m292.9 56.4c4.6.0 8.5 25.5 8.5 56.7.0 31.1-3.7 57.2-8.4 57.2-4.6.0-8.4-26-8.4-57.2.0-31.1 3.7-56.7 8.4-56.7zm0 0 73.6-.2c4.1.0 9.1 25.4 9.1 56.8.0 31.3-4.8 57.4-8.9 57.4l-73.6-.1" class="style0" style="fill:#fff;stroke:#4183d7;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;fill-opacity:1;stroke-opacity:1"/><path id="path1934-1-7" d="m254.9 82.9c2.6.0 4.9 14.9 4.9 33.3.0 18.2-2.1 33.6-4.8 33.6-2.6.0-4.8-15.2-4.8-33.6.0-18.2 2.1-33.3 4.8-33.3zm0 0 42.3-.1c2.3.0 5.2 14.9 5.2 33.3s-2.7 33.7-5.1 33.7H255" class="style0" style="fill:#fff;stroke:#4183d7;stroke-width:3;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;fill-opacity:1"/><path id="path1934-1-4" d="m228.2 97.7c1.8.0 3.4 9.2 3.4 20.5s-1.5 20.7-3.3 20.7-3.3-9.4-3.3-20.7 1.4-20.5 3.3-20.5zm0 0 29.4-.1c1.6.0 3.6 9.2 3.6 20.5.0 11.4-1.9 20.7-3.5 20.7h-29.4" class="style0" style="fill:#fff;stroke:#4183d7;stroke-width:2.2;stroke-linejoin:round;stroke-opacity:1;fill-opacity:1"/><text x="-4.7" y="10.2" id="text4004" style="font-size:14px;-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;fill:#fff"><tspan x="-4.7" y="10.2" id="tspan4006" style="font-size:12px;fill:#fff"><tspan x="-4.7" y="10.2" id="tspan4008" style="-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;font-size:12px;fill:#fff">Guard Relay Encryption</tspan></tspan></text><text x="-5.8" y="32.1" id="text3998" style="font-size:14.1px;-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;fill:#fff"><tspan x="-5.8" y="32.1" id="tspan4000" style="font-size:12px;fill:#fff"><tspan x="-5.8" y="32.1" id="tspan4002" style="-inkscape-font-specification:Segoe UI;font-family:Segoe UI;font-weight:400;font-style:normal;font-stretch:normal;font-variant:normal;font-size:12px;fill:#fff">Middle Relay Encryption</tspan></tspan></text><text x="-5.1" y="52.7" id="text3992" style="font-size:14px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-family:Segoe UI;-inkscape-font-specification:Segoe UI;fill:#fff"><tspan x="-5.1" y="52.7" id="tspan3994" style="font-size:12px;fill:#fff"><tspan x="-5.1" y="52.7" id="tspan3996" style="font-size:12px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-family:Segoe UI;-inkscape-font-specification:Segoe UI;fill:#fff">Exit Relay Encryption</tspan></tspan></text><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m548.4 36.3s41.8 75 0 153.5" id="path6775"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m533.9 37.6s41.8 75 0 153.5" id="path6775-2"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m517.8 37.7s41.8 75 0 153.5" id="path6775-8-4"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m503.3 36.7s41.8 75 0 153.5" id="path6775-5"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m487.1 36.8s41.8 75 0 153.5" id="path6775-8-2"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m470.8 37.9s41.8 75 0 153.5" id="path6775-8-8"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m451.6 39.1s41.8 75 0 153.5" id="path6775-8-9"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m433.6 35.6s41.8 75 0 153.5" id="path6775-23"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m414.4 36.7s41.8 75 0 153.5" id="path6775-62"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m396.1 36.7s41.8 75 0 153.5" id="path6775-57"/><path style="fill:none;stroke:#4183d7;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m380 36.8s41.8 75 0 153.5" id="path6775-8-827"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m360.4 170.4s18.9-42.4.0-114" id="path6924"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m353 170.9s18.9-42.4.0-114" id="path6924-0"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m344.8 171.8s18.9-42.4.0-114" id="path6924-5"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m336.7 170.7s18.9-42.4.0-114" id="path6924-5-5"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m328.7 170.7s18.9-42.4.0-114" id="path6924-5-2"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m320.1 169.6s18.9-42.4.0-114" id="path6924-5-7"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m311.5 169.6s18.9-42.4.0-114" id="path6924-5-6"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m303.5 171.3s18.9-42.4.0-114" id="path6924-5-78"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m293.1 149.8s7.4-30.9.0-65.8" id="path7008"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m288.8 148.9s7.4-30.9.0-65.8" id="path7008-7"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m283.7 148.9s7.4-30.9.0-65.8" id="path7008-8"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m278.5 149.5s7.4-30.9.0-65.8" id="path7008-1"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m273.9 149.8s7.4-30.9.0-65.8" id="path7008-6"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m268.8 148.6s7.4-30.9.0-65.8" id="path7008-0"/><path style="fill:none;stroke:#4183d7;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m263.3 148.9s7.4-30.9.0-65.8" id="path7008-9"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m254.8 97.7s8 17.9.0 41.2" id="path7074"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m252.7 97.9s8 17.9.0 41.2" id="path7074-8"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m250.6 97.4s8 17.9.0 41.2" id="path7074-9"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m248.6 96.8s8 17.9.0 41.2" id="path7074-0"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m246.1 97.2s8 17.9.0 41.2" id="path7074-00"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m243.6 98.2s8 17.9.0 41.2" id="path7074-7"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m241.1 98.1s8 17.9.0 41.2" id="path7074-2"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m238.7 97.9s8 17.9.0 41.2" id="path7074-5"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m236.3 97.2s8 17.9.0 41.2" id="path7074-52"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m233.8 98.2s8 17.9.0 41.2" id="path7074-1"/><path style="fill:none;stroke:#4183d7;stroke-width:.7;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m231.5 98.2s8 17.9.0 41.2" id="path7074-4"/><path style="fill:none;stroke:#fff;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m345.5 37.5H192L140.6 7.8" id="path7159"/><path style="fill:none;stroke:#fff;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m287 56.4h-98.3l-49.3-28.2" id="path7161"/><path style="fill:none;stroke:#fff;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none" d="m248.7 82.2h-57.3l-53-28.3" id="path7163"/><path style="fill:none;stroke:#fff;stroke-width:2;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;stroke-miterlimit:4;stroke-dasharray:none" d="m221.7 117.7h-33.2l-55.3-31.9" id="path7165"/><text x="-5.1" y="80.6" id="text3992-8" style="font-size:14px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;fill:#fff;font-family:Segoe UI;-inkscape-font-specification:Segoe UI"><tspan x="-5.1" y="80.6" id="tspan3994-6" style="font-size:12px;fill:#fff">Original Data</tspan></text></svg></div><br><p>This means that we have wrapped our original data in layers of encryption, much like an onion is wrapped in layers of&mldr;well, more onion, I guess.</p><p>By doing this, each relay only has the information it needs to know - where it got the encrypted data from, and where to send it to next. Encrypting data this way is beneficial to both parties: client traffic isn&rsquo;t compromised and relays can&rsquo;t be held liable for data they can&rsquo;t see.</p><blockquote><p>Note: It&rsquo;s important to remember that exit relays <strong>can see the original data sent by the client</strong>, since they have to pass that data to the destination. This means that, if credentials are passed over HTTP, FTP, or other cleartext protocols, the exit relays can sniff the traffic!</p></blockquote><h3 id=next-steps>Next Steps</h3><p>Our journey into the operation of Tor is just beginning. In future posts, we&rsquo;ll take a look at how the Tor network is organized, discuss the differences between relays and bridges, take a deep-dive into how exactly the encryption works, take a step-by-step view of what happens behind the scenes when you start up your Tor client for the first time, and more.</p><p>We have a lot to cover! Until then, feel free to read up on the official <a href=https://gitweb.torproject.org/torspec.git/tree/>Tor specifications</a>.</p><p>As always, please let me know if you have any questions or comments below!</p><p>-Jordan (<a href=https://twitter.com/jw_sec>@jw_sec</a>)</p><p><em>Update: <a href=/blog/2015/05/09/how-tor-works-part-two-relays-vs-bridges/>Part two - &ldquo;Relays vs. Bridges&rdquo;</a> has been published!</em></p><div><script>d=new Vivus("earth",{type:"oneByOne",duration:30,start:"inViewport",forceRender:!1,dashGap:20}),s=new Vivus("encryption",{type:"async",duration:30,start:"inViewport",forceRender:!1,dashGap:20}),e=new Vivus("network",{type:"oneByOne",duration:30,start:"inViewport",forceRender:!1,dashGap:20})</script></div></section><footer class=post-footer><figure class=author-image><a class=img href=https://jordan-wright.com/blog/ style=background-image:url(https://jordan-wright.com/blog/images/jordan-profile.jpg)><span class=hidden>Jordan Wright's Picture</span></a></figure><section class=author><h4><a href=https://jordan-wright.com/blog/>Jordan Wright</a></h4><p>Security Researcher, Open-Source Developer.</p><div class=author-meta><span class="author-location icon-location">Texas</span></div></section><section class=share><h4>Share this post</h4><a class=share-link href="https://twitter.com/intent/tweet?text=How%20Tor%20Works%3a%20Part%20One&nbsp;-&nbsp;Jordan%20Wright&amp;url=https%3a%2f%2fjordan-wright.com%2fblog%2f2015%2f02%2f28%2fhow-tor-works-part-one%2f" onclick='return window.open(this.href,"x-share","width=550,height=235"),!1'><svg class="share-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M18.244 2.25h3.308l-7.227 8.26 8.503 11.24h-6.68l-5.23-6.84-6.02 6.84H1.59l7.73-8.812L1.16 2.25h6.85l4.73 6.25 5.504-6.25zm-1.16 17.52h1.833L6.71 4.126H4.745L17.084 19.77z"/></svg>
<span class=hidden>X</span>
</a><a class=share-link href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fjordan-wright.com%2fblog%2f2015%2f02%2f28%2fhow-tor-works-part-one%2f&amp;t=How%20Tor%20Works%3a%20Part%20One" onclick='return window.open(this.href,"hn-share","width=600,height=400"),!1'><svg class="share-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill-rule="evenodd" d="M0 24V0h24v24H0zM6.951 5.896l4.112 7.708v5.064h1.583v-4.972l4.148-7.799h-1.749l-2.457 4.875c-.372.745-.688 1.434-.688 1.434s-.297-.708-.651-1.434L8.831 5.896h-1.88z"/></svg>
<span class=hidden>Hacker News</span>
</a><a class=share-link href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2fjordan-wright.com%2fblog%2f2015%2f02%2f28%2fhow-tor-works-part-one%2f" onclick='return window.open(this.href,"linkedin-share","width=600,height=500"),!1'><svg class="share-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853.0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.6.0 4.264 2.37 4.264 5.455v6.286zM5.337 7.433a2.062 2.062.0 110-4.123 2.062 2.062.0 010 4.123zM6.814 20.452H3.861V9h2.953v11.452zM22.225.0H1.771C.792.0.0.774.0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2.0 22.222.0z"/></svg>
<span class=hidden>LinkedIn</span></a></section></footer></article></main></div><script type=text/javascript src=https://jordan-wright.com/blog/js/jquery.js defer></script><script type=text/javascript src=https://jordan-wright.com/blog/js/index.js defer></script></body></html>